<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>正規分布デモ</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body { font-family: sans-serif; max-width: 800px; margin: 20px auto; }
    .control { margin-bottom: 20px; }
    label { display: block; margin-bottom: 8px; }
  </style>
</head>
<body>
  <h1>正規分布（μ と σ を変えてみる）</h1>

  <div class="control">
    <label>
      μ（平均）: <span id="mu-value">0</span>
      <input id="mu" type="range" min="-3" max="3" step="0.1" value="0">
    </label>
    <label>
      σ（標準偏差）: <span id="sigma-value">1</span>
      <input id="sigma" type="range" min="0.5" max="3" step="0.1" value="1">
    </label>
  </div>

  <div id="plot" style="width:100%;height:400px;"></div>

  <script>
    function normalPdf(x, mu, sigma) {
      const coeff = 1 / (sigma * Math.sqrt(2 * Math.PI));
      const exponent = - Math.pow(x - mu, 2) / (2 * sigma * sigma);
      return coeff * Math.exp(exponent);
    }

    function generateData(mu, sigma) {
      const xs = [];
      const ys = [];
      const start = mu - 4 * sigma;
      const end = mu + 4 * sigma;
      const step = (end - start) / 200;
      for (let x = start; x <= end; x += step) {
        xs.push(x);
        ys.push(normalPdf(x, mu, sigma));
      }
      return { xs, ys };
    }

    const muInput = document.getElementById('mu');
    const sigmaInput = document.getElementById('sigma');
    const muValue = document.getElementById('mu-value');
    const sigmaValue = document.getElementById('sigma-value');

    function draw() {
      const mu = parseFloat(muInput.value);
      const sigma = parseFloat(sigmaInput.value);
      muValue.textContent = mu.toFixed(1);
      sigmaValue.textContent = sigma.toFixed(1);

      const { xs, ys } = generateData(mu, sigma);

      const trace = {
        x: xs,
        y: ys,
        mode: 'lines',
        name: 'Normal PDF'
      };

      const layout = {
        margin: { t: 20 },
        xaxis: { title: 'x' },
        yaxis: { title: 'f(x)' }
      };

      Plotly.newPlot('plot', [trace], layout, {responsive: true});
    }

    muInput.addEventListener('input', draw);
    sigmaInput.addEventListener('input', draw);

    // 初期描画
    draw();
  </script>
</body>
</html>
